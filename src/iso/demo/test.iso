REC "STRING.INIT" JMP SEC "STRING.INIT.END"
REC "FILE.INIT"   JMP SEC "FILE.INIT.END"
REC "MATH.INIT"   JMP SEC "MATH.INIT.END"

RUN "MAIN"
RUN "SYSTEM.EXIT"

FUN "PRINT.FLOAT",
	"NUMBER"
	SEC "PRINT.FLOAT.START"
		POS 
		VAR "BUFFER"    SET
		STR "                " 10
		
		VAR "NUMBER"    GET
		NUM 0
		VAR "BUFFER"    GET
		RUN "STRING.FROM_FLOAT"
		RUN "CONSOLE.PRINT"
	SEC "PRINT.FLOAT.END"
		RET

FUN "PRINT.MATRIX4",
	"MATRIX"
	NUM 0
	VAR "INDEX" SET
	
	SEC "PRINT.MATRIX4.LOOP"
		NUM 16
		VAR "INDEX"             GET CLE
		REC "PRINT.MATRIX4.END" JMC
		
		VAR "MATRIX"      GET
		VAR "INDEX"       GET ADD GET
		RUN "PRINT.FLOAT" POP
		
		VAR "INDEX" GET
		NUM 1       ADD
		VAR "INDEX" SET
		
		REC "PRINT.MATRIX4.LOOP" JMP
	SEC "PRINT.MATRIX4.END"
		RET

FUN "MAIN"
	POS
	VAR "VIEW_MATRIX" SET
	FPU
		0 0 0 0
		0 0 0 0
		0 0 0 0
		0 0 0 0
	FPU 70 1.6 0.1 1000
	RUN "MATRIX4.PERSPECTIVE.SET" POP POP POP POP
	
	VAR "VIEW_MATRIX"   GET
	RUN "PRINT.MATRIX4" POP
	
	RET
